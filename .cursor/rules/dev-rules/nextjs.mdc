## 🎯 目的

* 最小実装で高速に価値検証できる Next.js アプリの規約化
* UI/UX のばらつきを防ぎ、Discord・LINE どちらでも運用できる求⼈体験を実現
* 他の Discord サーバー管理者にも使ってもらえる “転用可能なミニアプリ” の基盤設計

---

## 📁 ディレクトリ構成（App Router）

```
app/
  ├── (public)/        # 求人一覧・応募導線の公開ページ
  ├── (user)/          # ユーザー登録・友達グループ作成
  ├── apply/           # 応募フロー
  ├── api/             # API Routes
  └── components/      # UIコンポーネント
lib/
  ├── supabase/        # 認証・DB操作
  ├── discord/         # Discord連携ロジック
  ├── line/            # LINE公式連携ロジック
  └── utils/           # 汎用関数
```

---

## 🧩 UI コンポーネント方針

### ● Shadcn UI を標準使用

* ボタン、ダイアログ、フォーム、ステップ UI を統一
* コンポーネントは `/components/ui/` に配置

### ● 再利用される UI は必ず分離

例：

* `<JobCard />`
* `<ApplyStep />`
* `<FriendInviteWidget />`
* `<ShareToGroupButton />`

---

## 🪜 応募フロー設計

### 現状の Discord フロー（改善前）

```
1. サーバー参加
2. 友達情報を伝えてグループ作成
3. 求人スレの投稿を見て共有
4. 外部リンクで個人応募
5. 応募したことをスクショで共有
```

➡ 手間が多く、アプリより複雑になっている

---

## 🔁 改良後：UI とフローの再構成

### ① Web アプリの中心化

Discord / LINE から **1リンクでミニアプリへ遷移**

```
LINE → Web
Discord → Web
```

* 友達招待
* グループ作成
* 求人共有
* 応募
  がすべて Web 内で閉じる

### ② 3ステップ応募 UI

```
STEP1：求人を見る
STEP2：友達と一緒に応募（グループ選択 / 作成）
STEP3：応募完了 → 自動でグループに共有
```

### ③ グループ共有は Discord / LINE に自動ポスト

* Discord → Webhook
* LINE → Messaging API

---

## 🔐 認証設計

### シンプルにするため **電話番号 or LINE Login を推奨**

* 学生が使う → LINE Login が最適
* Discord サーバー管理者用 → Discord OAuth を併用

---

## 🌐 求人データ管理

### Supabase を前提とする

* `jobs` テーブル（求人）
* `groups` テーブル（友達グループ）
* `applications` テーブル（応募）
* `server_admins`（外部管理者）

---

## 🔌 Discord / LINE 連携

### Discord サーバー管理者向け

* 自分のサーバー専用の「求人投稿ページ」を持てる
* 求人作成 → Webhook で自サーバーの求人チャンネルに自動投稿

### LINE 公式アカウント運用者向け

* 求人追加 → LIFF 経由でユーザーへ配信
* グループ応募結果のメッセージ送信

---

## 🧪 ABテストと検証方針

* UI フローは「1画面1目的」
* 毎週 1 個機能を改善（.cursor/rules に準拠）
* LINE / Discord / 単発Web の 3ch で流入比較

---
